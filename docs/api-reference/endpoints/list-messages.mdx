---
title: "List Messages"
api: "POST /list-messages"
description: "List SMS messages with filtering and pagination"
---

Retrieve a paginated list of messages for your account. Supports filtering by thread, direction, and date range.

## Request Body

<ParamField body="limit" type="integer" default={50}>
  Maximum number of messages to return. Max: 100.
</ParamField>

<ParamField body="offset" type="integer" default={0}>
  Number of messages to skip for pagination.
</ParamField>

<ParamField body="thread_id" type="string">
  Filter by specific conversation thread.
</ParamField>

<ParamField body="direction" type="string">
  Filter by message direction: `inbound` or `outbound`.
</ParamField>

<ParamField body="phone_number" type="string">
  Filter by phone number (either from or to).
</ParamField>

<ParamField body="from_date" type="string">
  Filter messages after this ISO 8601 date.
</ParamField>

<ParamField body="to_date" type="string">
  Filter messages before this ISO 8601 date.
</ParamField>

## Response

<ResponseField name="messages" type="array">
  Array of message objects.
</ResponseField>

<ResponseField name="total" type="integer">
  Total number of messages matching the filters.
</ResponseField>

<ResponseField name="has_more" type="boolean">
  Whether there are more messages to paginate through.
</ResponseField>

<RequestExample>
```bash cURL
curl -X POST https://api.magpipe.ai/functions/v1/list-messages \
  -H "Authorization: Bearer YOUR_API_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "limit": 20,
    "phone_number": "+14155551234"
  }'
```

```javascript Node.js
const response = await fetch(
  'https://api.magpipe.ai/functions/v1/list-messages',
  {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer YOUR_API_TOKEN',
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      limit: 20,
      phone_number: '+14155551234'
    }),
  }
);

const { messages, total } = await response.json();
console.log(`Found ${total} messages`);
```

```python Python
import requests

response = requests.post(
    'https://api.magpipe.ai/functions/v1/list-messages',
    headers={
        'Authorization': 'Bearer YOUR_API_TOKEN',
        'Content-Type': 'application/json',
    },
    json={
        'limit': 20,
        'phone_number': '+14155551234'
    }
)

data = response.json()
print(f"Found {data['total']} messages")
```
</RequestExample>

<ResponseExample>
```json Success Response
{
  "messages": [
    {
      "id": "8e4f9a00-c3d4-6e5f-1a2b-890123cdef01",
      "thread_id": "9f5a0b11-d4e5-7f6a-2b3c-901234def012",
      "from_number": "+16045551234",
      "to_number": "+14155551234",
      "body": "Your appointment is confirmed for tomorrow at 2pm.",
      "direction": "outbound",
      "status": "delivered",
      "is_ai_generated": false,
      "created_at": "2024-01-15T10:30:00Z"
    },
    {
      "id": "7d3e8b00-b2c3-5d4e-0a1b-789012bcde01",
      "thread_id": "9f5a0b11-d4e5-7f6a-2b3c-901234def012",
      "from_number": "+14155551234",
      "to_number": "+16045551234",
      "body": "Thank you! I'll be there.",
      "direction": "inbound",
      "status": "delivered",
      "is_ai_generated": false,
      "created_at": "2024-01-15T10:35:00Z"
    }
  ],
  "total": 42,
  "has_more": true
}
```
</ResponseExample>
