---
title: "Update Agent"
api: "POST /update-agent"
description: "Update an existing AI agent's configuration"
---

Update any configuration fields for an existing AI agent. Only include fields you want to change.

## Request Body

<ParamField body="agent_id" type="string" required>
  The unique identifier of the agent to update.
</ParamField>

<ParamField body="name" type="string">
  Agent display name (max 100 characters).
</ParamField>

<ParamField body="greeting" type="string">
  Message spoken when answering calls (max 500 characters).
</ParamField>

<ParamField body="system_prompt" type="string">
  Instructions defining the agent's behavior (max 10,000 characters).
</ParamField>

<ParamField body="voice_id" type="string">
  Voice identifier for text-to-speech. Use IDs from the list-voices endpoint.
</ParamField>

<ParamField body="llm_model" type="string">
  LLM model for conversation: `gpt-4.1-nano` (fastest, default), `gpt-4o`, `gpt-4o-mini`.
</ParamField>

<ParamField body="language" type="string">
  Language code (e.g., `en-US`, `es-ES`).
</ParamField>

<ParamField body="max_call_duration" type="integer">
  Maximum call duration in seconds (60 to 3600).
</ParamField>

<ParamField body="end_call_phrases" type="array">
  Phrases that trigger call termination.
</ParamField>

<ParamField body="transfer_phone_number" type="string">
  Phone number for call transfers.
</ParamField>

<ParamField body="is_active" type="boolean">
  Enable or disable the agent.
</ParamField>

<ParamField body="functions" type="object">
  Configuration for agent functions. See [Create Agent](/api-reference/endpoints/create-agent) for full schema.

  **Example - Enable transfer with multiple numbers:**
  ```json
  {
    "transfer": {
      "enabled": true,
      "numbers": [
        { "number": "+14155551234", "label": "Sales", "description": "Transfer for sales inquiries" }
      ]
    }
  }
  ```

  **Example - Configure end call:**
  ```json
  {
    "end_call": {
      "enabled": true,
      "description": "End the call after confirming the appointment."
    }
  }
  ```
</ParamField>

<ParamField body="dynamic_variables" type="array">
  Dynamic variables for extracting structured data from conversations. Replaces all existing variables for this agent.

  Each variable object:
  - `name` (string, required) — Variable name (e.g., `caller_name`)
  - `description` (string) — What to extract
  - `var_type` (string) — `text` (default), `number`, `boolean`, or `enum`
  - `enum_options` (array) — Required when `var_type` is `enum`

  ```json
  [
    {"name": "caller_name", "description": "Full name of the caller", "var_type": "text"},
    {"name": "priority", "description": "Call priority level", "var_type": "enum", "enum_options": ["low", "medium", "high"]}
  ]
  ```
</ParamField>

<ParamField body="memory_enabled" type="boolean">
  Enable [caller memory](/features/agent-memory) — the agent remembers past conversations with each contact.
</ParamField>

<ParamField body="memory_config" type="object">
  Configuration for caller memory. Only applies when `memory_enabled` is `true`.

  | Property | Type | Default | Description |
  |----------|------|---------|-------------|
  | `include_summaries` | boolean | `true` | Include AI-generated relationship summary in context |
  | `max_history_calls` | number | `5` | Number of recent calls to consider when building context |
  | `include_key_topics` | boolean | `true` | Include key topics in context |
  | `include_preferences` | boolean | `true` | Include caller preferences in context |

  ```json
  {
    "include_summaries": true,
    "max_history_calls": 10,
    "include_key_topics": true,
    "include_preferences": true
  }
  ```
</ParamField>

<ParamField body="semantic_memory_enabled" type="boolean">
  Enable [semantic memory](/features/agent-memory#semantic-memory) — the agent finds similar past conversations across all contacts using AI embeddings.
</ParamField>

<ParamField body="semantic_memory_config" type="object">
  Configuration for semantic memory. Only applies when `semantic_memory_enabled` is `true`.

  | Property | Type | Default | Description |
  |----------|------|---------|-------------|
  | `max_results` | number | `3` | Number of similar conversations to include |
  | `similarity_threshold` | number | `0.75` | Minimum similarity score (0.6–0.85) |
  | `include_other_callers` | boolean | `true` | Include conversations from other contacts |

  ```json
  {
    "max_results": 5,
    "similarity_threshold": 0.75,
    "include_other_callers": true
  }
  ```
</ParamField>

<ParamField body="shared_memory_agent_ids" type="array">
  Array of agent UUIDs that share memory with this agent. Allows multiple agents to access the same contact memories.

  ```json
  ["550e8400-e29b-41d4-a716-446655440001", "550e8400-e29b-41d4-a716-446655440002"]
  ```
</ParamField>

## Response

Returns the updated agent object.

<RequestExample>
```bash cURL
curl -X POST https://api.magpipe.ai/functions/v1/update-agent \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "agent_id": "550e8400-e29b-41d4-a716-446655440000",
    "greeting": "Hi there! Thanks for calling Acme Dental. How can I help you?",
    "llm_model": "gpt-4o"
  }'
```

```javascript Node.js
const response = await fetch(
  'https://api.magpipe.ai/functions/v1/update-agent',
  {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY',
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      agent_id: '550e8400-e29b-41d4-a716-446655440000',
      greeting: 'Hi there! Thanks for calling Acme Dental. How can I help you?',
      llm_model: 'gpt-4o'
    }),
  }
);

const agent = await response.json();
console.log('Updated:', agent.updated_at);
```

```python Python
import requests

response = requests.post(
    'https://api.magpipe.ai/functions/v1/update-agent',
    headers={
        'Authorization': 'Bearer YOUR_API_KEY',
        'Content-Type': 'application/json',
    },
    json={
        'agent_id': '550e8400-e29b-41d4-a716-446655440000',
        'greeting': 'Hi there! Thanks for calling Acme Dental. How can I help you?',
        'llm_model': 'gpt-4o'
    }
)

agent = response.json()
print(f"Updated: {agent['updated_at']}")
```
</RequestExample>

<ResponseExample>
```json Success Response
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "Sarah - Receptionist",
  "greeting": "Hi there! Thanks for calling Acme Dental. How can I help you?",
  "llm_model": "gpt-4o",
  "updated_at": "2024-01-16T09:15:00Z",
  "dynamic_variables": [
    {
      "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
      "name": "caller_name",
      "description": "Full name of the caller",
      "var_type": "text",
      "enum_options": null,
      "created_at": "2024-01-10T10:00:00Z",
      "updated_at": "2024-01-10T10:00:00Z"
    }
  ]
}
```
</ResponseExample>
